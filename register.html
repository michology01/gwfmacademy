<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Register - GWFMA Nigeria</title>
  <meta name="description" content="Register for GWFMA programs including Workbook, Workshop, Forex Academy, and Lifetime Membership." />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="favicon.ico" />
  <style>
    .cta-gold { background:#f5c04a; color:#111827; padding:0.6rem 1.2rem; border-radius:0.6rem; font-weight:600; transition:.2s; }
    .cta-gold:hover { transform:translateY(-2px); box-shadow:0 8px 20px rgba(245,192,74,0.25); }
    .hidden { display:none; }
  </style>
</head>
<body class="bg-white text-gray-900 antialiased">

  <!-- Header -->
  <header class="bg-black shadow-md sticky top-0 z-50">
    <div class="container mx-auto px-6 py-4 flex items-center justify-between text-white">
      <div class="flex items-center gap-3">
        <a href="index.html">
          <img src="images/company-logo.jpg" alt="GWFMA Logo" class="h-12">
        </a>
        <div>
          <div class="font-bold text-lg">GWFMA Nigeria</div>
          <div class="text-xs text-gray-300">Global Wealth Financial Market Academy</div>
        </div>
      </div>
      <div class="flex items-center gap-4">
        <select id="lang" class="p-2 rounded bg-gray-800 text-white">
          <option value="en">English</option>
          <option value="yo">Yoruba</option>
          <option value="ig">Igbo</option>
          <option value="ha">Hausa</option>
        </select>
        <button id="menuBtn" class="md:hidden p-2 rounded bg-gray-800">☰</button>
      </div>
      <nav id="navLinks" class="hidden flex-col gap-3 absolute top-full left-0 w-full bg-black md:static md:flex md:flex-row md:gap-6 md:bg-transparent md:w-auto">
        <a href="index.html" class="hover:text-yellow-400">Home</a>
        <a href="about.html" class="hover:text-yellow-400">About</a>
        <a href="calculator.html" class="hover:text-yellow-400">Calculator</a>
        <a href="media.html" class="hover:text-yellow-400">Media</a>
        <a href="blog.html" class="hover:text-yellow-400">Blog</a>
        <a href="contact.html" class="hover:text-yellow-400">Contact</a>
        <a href="careers.html" class="hover:text-yellow-400">Careers</a>
        <a href="register.html" class="cta-gold text-center">Enroll</a>
      </nav>
    </div>
  </header>

  <!-- Registration Form -->
  <section class="py-20">
    <div class="container mx-auto px-6 max-w-lg bg-gray-50 p-8 rounded-xl shadow">
      <h1 id="reg-title" class="text-2xl font-bold mb-6 text-center">Register for a Program</h1>
      
      <form id="registerForm" action="https://formspree.io/f/mdkwovnb" method="POST" class="space-y-4">
        <input type="text" name="name" placeholder="Full Name" required class="w-full p-3 border rounded" />
        <input type="email" name="email" placeholder="Email Address" required class="w-full p-3 border rounded" />
        <input type="tel" name="phone" placeholder="Phone Number" required class="w-full p-3 border rounded" />

        <!-- Country (auto-detect) -->
        <input type="text" id="country" name="country" readonly class="w-full p-3 border rounded bg-gray-100" />

        <!-- Program Selection -->
        <select id="program" name="program" required class="w-full p-3 border rounded">
          <option value="">Select Program</option>
          <option value="workbook">Workbook – ₦5,000 / $5</option>
          <option value="workshop">Workshop – ₦50,000 / $15</option>
          <option value="academy">12-Week Forex Academy – ₦150,000 / $60</option>
          <option value="lifetime">Lifetime Membership – ₦500,000 / $100</option>
        </select>

        <!-- Display Price -->
        <div id="priceDisplay" class="text-lg font-semibold text-center text-green-600 hidden"></div>

        <button type="submit" class="cta-gold w-full">Submit Registration</button>
      </form>

      <!-- Success Message -->
      <div id="successMessage" class="hidden mt-6 text-center text-green-700 font-semibold">
        ✅ Thank you! Your registration has been submitted successfully. Redirecting to payment...
      </div>
    </div>
  </section>

  <!-- Support -->
  <section class="py-10 bg-gray-900 text-white text-center">
    <p id="support-text" class="mb-4">Need Help? Contact us directly:</p>
    <div class="flex justify-center gap-6">
      <a href="mailto:support@gwfma.com" class="hover:text-yellow-400">📧 Email</a>
      <a href="tel:+2348000000000" class="hover:text-yellow-400">📞 Call</a>
      <a href="https://wa.me/2348000000000" target="_blank" class="hover:text-yellow-400">💬 WhatsApp</a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-900 text-gray-300 py-12 text-center">
    <p id="footer-text" class="text-sm">© GWFMA Nigeria. All rights reserved.</p>
  </footer>

  <!-- Script -->
  <script>
    // Program Prices (Square only)
    const programPrices = {
      workbook: { usd:"$5", ngn:"₦5,000", square:"https://checkout.square.site/merchant/ML0VXN447PMM5/checkout/SCMFUKO33JO3YMUNTETJCJJR" },
      workshop: { usd:"$15", ngn:"₦50,000", square:"https://checkout.square.site/merchant/ML0VXN447PMM5/checkout/JKLBSK2GAU7MJ64FW52OETJK" },
      academy:  { usd:"$60", ngn:"₦150,000", square:"https://checkout.square.site/merchant/ML0VXN447PMM5/checkout/F3AVYCR5RFWNU4PKH2Z555JW" },
      lifetime: { usd:"$100", ngn:"₦500,000", square:"https://checkout.square.site/merchant/ML0VXN447PMM5/checkout/KLOUXZ2PKCOCDDF7XBF7MGF3" }
    };

    let userInNigeria = true;

    const programSelect   = document.getElementById("program");
    const priceDisplay    = document.getElementById("priceDisplay");
    const registerForm    = document.getElementById("registerForm");
    const successMessage  = document.getElementById("successMessage");

    // Show price when program selected
    programSelect.addEventListener("change", function() {
      const selected = this.value;
      if (programPrices[selected]) {
        priceDisplay.textContent = "Program Fee: " + (userInNigeria ? programPrices[selected].ngn : programPrices[selected].usd);
        priceDisplay.classList.remove("hidden");
      } else {
        priceDisplay.classList.add("hidden");
      }
    });

    // Handle form submission with Formspree and auto-redirect
    registerForm.addEventListener("submit", function(e) {
      e.preventDefault();
      const selected = programSelect.value;

      fetch(registerForm.action, {
        method:"POST",
        body:new FormData(registerForm),
        headers:{ 'Accept':'application/json' }
      }).then(res=>{
        if(res.ok){
          successMessage.classList.remove("hidden");

          if (programPrices[selected]) {
            // Redirect after 2 seconds
            setTimeout(()=>{
              window.location.href = programPrices[selected].square;
            },2000);
          }

          registerForm.reset();
          priceDisplay.classList.add("hidden");
        } else {
          alert("❌ Error submitting form. Try again.");
        }
      });
    });

    // Geo-IP Currency Auto-Detection
    fetch("https://ipapi.co/json/")
      .then(res => res.json())
      .then(data => {
        document.getElementById("country").value = data.country_name;
        if (data.country_name !== "Nigeria") {
          userInNigeria = false;
        }
      })
      .catch(() => {
        document.getElementById("country").value = "Nigeria (default)";
      });

    // Translator
    const translations = {
      en:{title:"Register for a Program",support:"Need Help? Contact us directly:",footer:"© GWFMA Nigeria. All rights reserved."},
      yo:{title:"Forukọsilẹ fun Eto kan",support:"Nilo iranlọwọ? Kan si wa taara:",footer:"© GWFMA Naijiria. Gbogbo ẹtọ wa ni aabo."},
      ig:{title:"Debanye aha maka mmemme",support:"Chọrọ enyemaka? Kpọtụrụ anyị ozugbo:",footer:"© GWFMA Naịjirịa. Ebe niile echekwara."},
      ha:{title:"Yi rajista don shirin",support:"Kana buƙatar taimako? Tuntube mu kai tsaye:",footer:"© GWFMA Najeriya. Duk haƙƙoƙi an tanada."}
    };

    document.getElementById("lang").addEventListener("change", function(){
      const lang=this.value; const t=translations[lang];
      document.getElementById("reg-title").innerText=t.title;
      document.getElementById("support-text").innerText=t.support;
      document.getElementById("footer-text").innerText=t.footer;
    });

    // Mobile menu toggle
    document.getElementById("menuBtn").addEventListener("click",()=>document.getElementById("navLinks").classList.toggle("hidden"));
  </script>
</body>
</html>
